<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" name="receipt_name">
    <t t-inherit="point_of_sale.ReceiptScreen" t-inherit-mode="extension">
        <xpath expr="//h1" position="before">
            <POSReceiptType/>
        </xpath>
    </t>

    <!-- translations can be found in ar.po files -->
        <t t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension">
        <xpath expr="//div[@class='pos-receipt']" position="replace"> <!-- position values can be either inside, after or before -->
            <div class="pos-receipt">
                <t t-set="ReceiptClient" t-value="env.pos.get_client() || ''"/>
                <div style="width: 310px; font-size: 14px; direction: rtl; text-align: center;">
                    <style>
                        table, th, td {
                            border-bottom: 1px solid black;
                            text-align: right;
                            width: 265px;
                            font-size: 14px;}
                    </style>
                    <img class="pos-receipt-logo" t-att-src="receipt.company.logo" alt="Logo"/>
                    <span style="text-align:center; padding: 0;">مطعم وجبة كبيرة</span>
                    <br/>
                    <span style="text-align:center; padding: 0;">***فاتورة***</span>
                    <br/>
                    <tr style="width: 265px;" height="10px">
                        <th colspan="2">
                          الرقم الضريبي :<span t-esc="receipt.company.vat"/>
                        </th>
                        <th colspan="2">
                            مسلسل الفاتورة :<span t-esc="receipt.name"/>
                        </th>

                    </tr>
                        <tr style="width: 265px;" height="10px">
                            <th style="width: 265px;" colspan="2">
                                العميل : <span t-esc="ReceiptClient.name"/>
                            </th>
                            <th>

                            </th>
                            <th style="width: 265px;" colspan="2">
                                التاريخ : <span t-esc="receipt.date.localestring"/>

                            </th>
                        </tr>
                        <tr height="10px" colspan="5">
                            <th>الصنف</th>
                            <th>الكمية</th>
                            <th>السعر</th>
                            <th>الاجمالي</th>

                        </tr>
                        <!-- this should be not a comment only in v 15.0 or above  -->
                        <!-- <t t-call="OrderLinesReceipt"/> -->
                        <t t-foreach="receipt.orderlines" t-as="line" t-key="line.id">
                            <tr style="text-align: center;">
                                <td><span t-esc="line.product_name_wrapped[0]"></span></td>
                                <td><span t-esc="env.pos.format_currency_no_symbol(line.quantity) || ''"></span></td>
                                <td><span t-esc="env.pos.format_currency_no_symbol(line.price)"></span></td>
                                <td><span t-esc="env.pos.format_currency_no_symbol(line.price_without_tax) || env.pos.format_currency_no_symbol(line.price)"></span></td>
                            </tr>
                        </t>
                        <tr>
                            <th colspan="5">
                                الاجمالي قبل الضريبة : <span t-esc="env.pos.format_currency(receipt.total_without_tax)"/>
                            </th>
                        </tr>
                        <tr>
                            <th colspan="5">
                                ضريبة القيمة المضافة : <span t-esc="env.pos.format_currency(receipt.total_tax)"/>
                            </th>
                        </tr>
                        <tr>
                            <th colspan="5">
                                الخصم : <span t-esc="env.pos.format_currency(receipt.total_discount)"/>
                            </th>
                        </tr>
                        <tr>
                            <th colspan="5">
                                الاجمالي بعد الضريبة : <span t-esc="env.pos.format_currency(receipt.total_with_tax)"/>
                            </th>
                        </tr>
                        <tr>
                            <th colspan="5">
                                <t t-foreach="receipt.paymentlines" t-as="line">
                                    <t t-esc="line.name"/>:
                                    <t t-esc="env.pos.format_currency_no_symbol(line.amount)"/>
                                    <br/>
                                </t>
                                البائع المسئول : <span t-esc="receipt.cashier"/>
                                <br/>
                                المتبقي : <span t-esc="env.pos.format_currency(receipt.change)"/>
                            </th>
                        </tr>
                        <p style="font-size: 14px; font-weight: bold; color: white; background: black;">البضاعة لا ترد ولاتستبدل بعد خروجها من المحل</p>
                        <img t-if="receipt.qr_code" id="qrcode" t-att-src="receipt.qr_code" class="pos-receipt-logo"/>
                </div>

                <!-- http://hostingdomain:portno/report/barcode/?type=Code128&value=test&width=600&height=100 -->
                <!-- t-att-src is important to substitute receipt.name with the assigned value -->
                <img t-att-src="'/report/barcode/?type=Code128&amp;value='+receipt.name+'&amp;width=600&amp;height=100'"
                style="width:290px;height:60px;"/>

                <center><img t-att-src="'/report/barcode/?type=QR&amp;value='+receipt.name+'&amp;width=100&amp;height=100'"
                style="width:60px;height:60px;"/></center>



                <div class="before-footer" />

                <div class="pos-receipt-amount receipt-change"></div>

                <t t-if="receipt.cashier">
                    <div class="cashier">

                    </div>
                </t>

                <div class="pos-receipt-order-data">

                </div>

            </div>

        </xpath>
        


    </t>

</templates>

<!-- <?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="OrderReceipt" owl="1">
        <div class="pos-receipt">
            <t t-if="receipt.company.logo">
                <img class="pos-receipt-logo" t-att-src="receipt.company.logo" alt="Logo"/>
                <br/>
            </t>
            <t t-if="!receipt.company.logo">
                <h2 class="pos-receipt-center-align">
                    <t t-esc="receipt.company.name" />
                </h2>
                <br/>
            </t>
            <div class="pos-receipt-contact">
                <t t-if="receipt.company.contact_address">
                    <div><t t-esc="receipt.company.contact_address" /></div>
                </t>
                <t t-if="receipt.company.phone">
                    <div>Tel:<t t-esc="receipt.company.phone" /></div>
                </t>
                <t t-if="receipt.company.vat">
                    <div><t t-esc="receipt.company.vat_label"/>:<t t-esc="receipt.company.vat" /></div>
                </t>
                <t t-if="receipt.company.email">
                    <div><t t-esc="receipt.company.email" /></div>
                </t>
                <t t-if="receipt.company.website">
                    <div><t t-esc="receipt.company.website" /></div>
                </t>
                <t t-if="receipt.header_html">
                    <t t-raw="receipt.header_html" />
                </t>
                <t t-if="!receipt.header_html and receipt.header">
                    <div style="white-space:pre-line"><t t-esc="receipt.header" /></div>
                </t>
                <t t-if="receipt.cashier">
                    <div class="cashier">
                        <div>********************</div>
                        <div>Served by <t t-esc="receipt.cashier" /></div>
                    </div>
                </t>
            </div>
            <br /><br />



            <div class="orderlines">
                <t t-foreach="receipt.orderlines" t-as="line" t-key="line.id">
                    <t t-if="isSimple(line)">
                        <div class="responsive-price">
                            <t t-esc="line.product_name_wrapped[0]" />
                            <span t-esc="env.pos.format_currency_no_symbol(line.price_display)" class="price_display pos-receipt-right-align"/>
                        </div>
                        <WrappedProductNameLines line="line" />
                    </t>
                    <t t-else="">
                        <div t-esc="line.product_name_wrapped[0]" />
                        <WrappedProductNameLines line="line" />
                        <t t-if="line.display_discount_policy == 'without_discount' and line.price != line.price_lst">
                            <div class="pos-receipt-left-padding">
                                <t t-esc="env.pos.format_currency_no_symbol(line.price_lst)" />
                                ->
                                <t t-esc="env.pos.format_currency_no_symbol(line.price)" />
                            </div>
                        </t>
                        <t t-elif="line.discount !== 0">
                            <div class="pos-receipt-left-padding">
                                <t t-if="env.pos.config.iface_tax_included === 'total'">
                                    <t t-esc="env.pos.format_currency_no_symbol(line.price_with_tax_before_discount)"/>
                                </t>
                                <t t-else="">
                                    <t t-esc="env.pos.format_currency_no_symbol(line.price)"/>
                                </t>
                            </div>
                        </t>
                        <t t-if="line.discount !== 0">
                            <div class="pos-receipt-left-padding">
                                Discount: <t t-esc="line.discount" />%
                            </div>
                        </t>
                        <div class="pos-receipt-left-padding">
                            <t t-esc="Math.round(line.quantity * Math.pow(10, env.pos.dp['Product Unit of Measure'])) / Math.pow(10, env.pos.dp['Product Unit of Measure'])"/>
                            <t t-if="!line.is_in_unit" t-esc="line.unit_name" />
                            x
                            <t t-esc="env.pos.format_currency(line.price_display_one)" />
                            <span class="price_display pos-receipt-right-align">
                                <t t-esc="env.pos.format_currency_no_symbol(line.price_display)" />
                            </span>
                        </div>
                    </t>
                    <t t-if="line.pack_lot_lines">
                        <div class="pos-receipt-left-padding">
                            <ul>
                                <t t-foreach="line.pack_lot_lines" t-as="lot" t-key="lot.cid">
                                    <li>
                                        SN <t t-esc="lot.attributes['lot_name']"/>
                                    </li>
                                </t>
                            </ul>
                        </div>
                    </t>
                </t>
            </div>



            <t t-if="!isTaxIncluded">
                <div class="pos-receipt-right-align">**********</div>
                <br/>
                <div>Subtotal<span t-esc="env.pos.format_currency(receipt.subtotal)" class="pos-receipt-right-align"/></div>
                <t t-foreach="receipt.tax_details" t-as="tax" t-key="tax.name">
                    <div class="responsive-price">
                        <t t-esc="tax.name" />
                        <span t-esc='env.pos.format_currency_no_symbol(tax.amount)' class="pos-receipt-right-align"/>
                    </div>
                </t>
            </t>

            <div class="pos-receipt-right-align">**********</div>
            <br/>
            <div class="pos-receipt-amount">
                TOTAL
                <span t-esc="env.pos.format_currency(receipt.total_with_tax)" class="pos-receipt-right-align"/>
            </div>
            <t t-if="receipt.total_rounded != receipt.total_with_tax">
                <div class="pos-receipt-amount">
                  Rounding
                <span t-esc='env.pos.format_currency(receipt.rounding_applied)' class="pos-receipt-right-align"/>
                </div>
                <div class="pos-receipt-amount">
                  To Pay
                 <span t-esc='env.pos.format_currency(receipt.total_rounded)' class="pos-receipt-right-align"/>
              </div>
            </t>
            <br/><br/>


            <t t-foreach="receipt.paymentlines" t-as="line" t-key="line.cid">
                <div>
                    <t t-esc="line.name" />
                    <span t-esc="env.pos.format_currency_no_symbol(line.amount)" class="pos-receipt-right-align"/>
                </div>
            </t>
            <br/>

            <div class="pos-receipt-amount receipt-change">
                CHANGE
                <span t-esc="env.pos.format_currency(receipt.change)" class="pos-receipt-right-align"/>
            </div>
            <br/>


            <t t-if="receipt.total_discount">
                <div>
                    Discounts
                    <span t-esc="env.pos.format_currency(receipt.total_discount)" class="pos-receipt-right-align"/>
                </div>
            </t>
            <t t-if="isTaxIncluded">
                <t t-foreach="receipt.tax_details" t-as="tax" t-key="tax.name">
                    <div>
                        <t t-esc="tax.name" />
                        <span t-esc="env.pos.format_currency_no_symbol(tax.amount)" class="pos-receipt-right-align"/>
                    </div>
                </t>
                <div>
                    Total Taxes
                    <span t-esc="env.pos.format_currency(receipt.total_tax)" class="pos-receipt-right-align"/>
                </div>
            </t>

            <div class="before-footer" />

            <div t-if="receipt.footer_html"  class="pos-receipt-center-align">
                <t t-raw="receipt.footer_html" />
            </div>

            <div t-if="!receipt.footer_html and receipt.footer"  class="pos-receipt-center-align" style="white-space:pre-line">
                <br/>
                <t t-esc="receipt.footer" />
                <br/>
                <br/>
            </div>

            <div class="after-footer">
                <t t-foreach="receipt.paymentlines" t-as="line">
                    <t t-if="line.ticket">
                        <br />
                        <div class="pos-payment-terminal-receipt">
                            <t t-raw="line.ticket" />
                        </div>
                    </t>
                </t>
            </div>

            <br/>
            <div class="pos-receipt-order-data">
                <div><t t-esc="receipt.name" /></div>
                <div><t t-esc="receipt.date.localestring" /></div>
            </div>

        </div>
    </t>

</templates>
-->